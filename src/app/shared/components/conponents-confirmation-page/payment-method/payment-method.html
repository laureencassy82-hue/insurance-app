<div class="flex-1 bg-white p-4 sm:p-6 rounded-xl shadow-lg" *ngIf="selectedMethod === 'card'">
  <h2 class="text-lg sm:text-xl font-bold text-gray-800 mb-4 sm:mb-6">
    {{ 'CONFIRMATION.PAYMENT_METHOD.TITLE' | translate }}
  </h2>

  <!-- Credit Card Section -->
  <div class="mb-4 sm:mb-6 border border-gray-200 shadow-md rounded-lg p-4 sm:p-6 relative">
    <div class="flex flex-col sm:flex-row justify-between items-start mb-4 gap-4">
      <div>
        <h3 class="text-base sm:text-lg font-semibold text-gray-800">
          {{ 'CONFIRMATION.PAYMENT_METHOD.CREDIT_CARD' | translate }}
        </h3>
        <p class="text-xs sm:text-sm text-gray-500 mt-1">
          {{ 'CONFIRMATION.PAYMENT_METHOD.CARD_INFO' | translate }}
        </p>
      </div>
      <div class="flex gap-2 mt-1">
        <img src="assets/images/visa.png" alt="Visa" class="h-5 sm:h-6" />
        <img src="assets/images/master.png" alt="MasterCard" class="h-5 sm:h-6" />
        <img src="assets/images/union.png" alt="UnionPay" class="h-5 sm:h-6" />
        <img src="assets/images/jcb.png" alt="JCB" class="h-5 sm:h-6" />
        <img src="assets/images/express.png" alt="Amex" class="h-5 sm:h-6" />
      </div>
    </div>

    <hr class="border-gray-200 mb-4 sm:mb-6" />

    <form [formGroup]="paymentForm" class="space-y-4 sm:space-y-6">
      <!-- Card Number -->
      <div class="relative">
        <label class="block mb-1 font-medium text-xs sm:text-sm text-gray-600">
          {{ 'CONFIRMATION.PAYMENT_METHOD.CARD_NUMBER' | translate }}
        </label>
        <div class="relative">
          <input
            type="text"
            formControlName="cardNumber"
            maxlength="16"
            (input)="onCardInput()"
            class="w-full border border-gray-200 rounded-md pl-10 pr-16 py-2 sm:py-3 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-purple-500 transition"
            [placeholder]="
              'CONFIRMATION.PAYMENT_METHOD.CARD_NUMBER_PLACEHOLDER' | translate
            "
          />
          <i class="fas fa-credit-card absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
        </div>
      </div>

      <!-- Name, Expire, CVV -->
      <div class="flex flex-col sm:flex-row gap-4">
        <div class="flex-1">
          <label class="block mb-1 font-medium text-xs sm:text-sm text-gray-600">
            {{ 'CONFIRMATION.PAYMENT_METHOD.CARD_NAME' | translate }}
          </label>
          <div class="relative">
            <input
              type="text"
              formControlName="cardName"
              class="w-full border border-gray-200 rounded-md pl-10 py-2 sm:py-3 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-purple-500 transition"
              [placeholder]="
                'CONFIRMATION.PAYMENT_METHOD.CARD_NAME_PLACEHOLDER' | translate
              "
            />
            <i class="fas fa-user absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
          </div>
        </div>

        <div class="flex-1">
          <label class="block mb-1 font-medium text-xs sm:text-sm text-gray-600">
            {{ 'CONFIRMATION.PAYMENT_METHOD.EXPIRE_DATE' | translate }}
          </label>
          <div class="relative">
            <input
              type="text"
              formControlName="expireDate"
              class="w-full border border-gray-200 rounded-md pl-10 py-2 sm:py-3 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-purple-500 transition"
              [placeholder]="
                'CONFIRMATION.PAYMENT_METHOD.EXPIRE_DATE_PLACEHOLDER' | translate
              "
            />
            <i class="fas fa-calendar-alt absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
          </div>
        </div>

        <div class="flex-1">
          <label class="block mb-1 font-medium text-xs sm:text-sm text-gray-600">
            {{ 'CONFIRMATION.PAYMENT_METHOD.CVV' | translate }}
          </label>
          <div class="relative">
            <input
              type="password"
              formControlName="cvv"
              class="w-full border border-gray-200 rounded-md pl-10 py-2 sm:py-3 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-purple-500 transition"
              [placeholder]="
                'CONFIRMATION.PAYMENT_METHOD.CVV_PLACEHOLDER' | translate
              "
            />
            <i class="fas fa-lock absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
          </div>
        </div>
      </div>
    </form>
  </div>

  <!-- Other Options Mobile -->
  <div class="sm:hidden mb-4 p-4">
    <h3 class="text-base font-semibold text-gray-800 mb-4">
      {{ 'CONFIRMATION.PAYMENT_METHOD.OTHER_OPTIONS' | translate }}
    </h3>
    <div class="flex flex-row gap-4 overflow-x-auto">
      <button
        type="button"
        class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 hover:shadow-md transition whitespace-nowrap"
        (click)="selectPaymentMethod('ABA')"
      >
        <i class="fas fa-university mr-2"></i>ABA
      </button>
    </div>
  </div>

<!-- Desktop / Card Success / Error -->
<div *ngIf="selectedMethod === 'card' && successMessage" class="mb-4 text-center text-sm sm:text-base font-semibold"
     [ngClass]="{'text-green-600': successMessage === 'PAYMENT.SUCCESS', 'text-red-600': successMessage !== 'PAYMENT.SUCCESS'}">
  {{ successMessage | translate }}
</div>



  <!-- Pay Button -->
  <button
    type="submit"
    class="w-full bg-yellow-400 text-gray-800 p-3 rounded-md text-sm sm:text-base font-semibold flex items-center justify-center gap-2 hover:bg-yellow-500 hover:shadow-md transition"
    (click)="onSubmit()"
  >
    <i class="fas fa-credit-card mr-2"></i>
    {{ 'CONFIRMATION.PAYMENT_METHOD.PAY_BUTTON' | translate }}
  </button>
</div>

<!-- ABA Payment Fullscreen -->
<div
  *ngIf="selectedMethod === 'ABA'"
  class="fixed inset-0 bg-gradient-to-b from-sky-900 to-cyan-800 text-white flex flex-col items-center justify-between py-10 px-6 z-50"
>
  <div class="text-center">
    <h3 class="text-lg font-semibold mb-6">{{ 'CONFIRMATION.PAYMENT_METHOD.ABA_TITLE' | translate }}</h3>
    <div class="w-24 h-24 bg-yellow-400 rounded-full mx-auto mb-6"></div>
    <h4 class="font-semibold text-lg">Dai-ichi Life Insurance (Cambodia) PLC</h4>
    <p class="text-3xl font-bold text-white mt-4">9.999 <span class="text-red-500 text-sm ml-1">USD</span></p>
    <p class="mt-4 text-sm">{{ 'CONFIRMATION.PAYMENT_METHOD.CONTACT' | translate }}: <span class="text-blue-300">098 222 345</span> | USD</p>
  </div>
  <button
    (click)="payNow()"
    class="w-full bg-red-500 py-3 text-white font-semibold text-lg hover:bg-red-600 transition rounded-none"
  >
    {{ 'CONFIRMATION.PAYMENT_METHOD.PAY_NOW' | translate }}
  </button>
</div>

<!-- Success Screen -->
<div
  *ngIf="showSuccess"
  class="fixed inset-0 bg-gradient-to-b from-sky-900 to-cyan-800 text-white flex flex-col items-center justify-between py-10 px-6 z-50"
>
  <div class="text-center">
    <div class="w-24 h-24 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-6">
      <i class="fas fa-check text-white text-4xl"></i>
    </div>
    <h3 class="text-xl font-bold">{{ 'CONFIRMATION.PAYMENT_METHOD.SUCCESS_MESSAGE' | translate }}</h3>
  </div>
  <button
    (click)="donePayment()"
    class="w-full bg-red-500 py-3 text-white font-semibold text-lg hover:bg-red-600 transition rounded-none"
  >
    {{ 'CONFIRMATION.PAYMENT_METHOD.DONE' | translate }}
  </button>
</div>
